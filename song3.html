<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <!-- css for the grid of the whole page-->
    <link rel="stylesheet" href="song3_grid.css">
    <!-- css for the encryption image -->
    <link rel="stylesheet" href="image_enc.css">
    <!-- css for the sidebar: primitives and file list -->
    <link rel="stylesheet" href="sidebar.css">
    <!-- css for other parts specific for this page -->
    <link rel="stylesheet" href="song3.css">

    <!-- import jquery to use in Electron -->
    <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
    <script src="./lib/jQuery3.6.js"></script>
    <script>if (window.module) module = window.module;</script>
</head>

<body>
<div id="outmost3">

    <h3>(3) Search</h3>

    <!-- for each of its immediate successor, add class "cell" -->
    <div class="grid" id="gridContainer">
        <!-- sidebar: primitives and files -->
        <div class="cell" id="primitives">
            <div>Primitives: </div>
            <div class="flex">
                <div id="bigE" class="block xs">E</div>
                <div id="G" class="block xs">Gs</div>
                <div id="smallF" class="block xs">f</div>
                <div id="bigF" class="block xs">F</div>
                <div id="smallE" class="block xs">e</div>
            </div>
        </div>
        <div class="cell" id="files">
            <div>Files: </div>
            <ul id="fileList">
                <li>file1</li>
                <li>file2</li>
                <li>file3</li>
                <li>file4</li>
                <li>file5</li>
                <li>file6</li>
                <li>file7</li>
                <li>file8</li>
                <li>file9</li>
                <li>file10</li>
                <li>file11</li>
                <li>file12</li>
            </ul>
        </div>
        <!-- 1st row: word, query term, img -->
        <!-- 1.1 word -->
        <div class="cell" id="word">
            <h3>Alice (you)</h3>
            <div id="chooseWord">
                <label>Enter (exactly) a block to search, the server will return all the documents containing this term.</label>
                <br>
                <input id="wordInput" required>
            </div>
            <button id="confirmButton" type="button" >Confirm</button>
            <p id="wordNotice"></p>
        </div>
        <!-- 1.2 query term -->
        <div class="cell" id="queryTerm">
            This cell is used to show the computed X and k to send to the server.
        </div>
        <!-- 1.3 img -->
        <div class="cell" id="img">
            <div id="imageContainer">
                <div id="imageTitle">Recall how C<sub>j</sub> is computed:</div>
                <!--pre-encryption-->
                <div id="Wj" class="block">W<sub>j</sub></div>
                <div id="da1" class="block-trans arrowSmall">&darr;</div>
                <div id="Xj" class="block">X<sub>j</sub></div>
                <div id="la" class="block-trans arrowSmall">&swarr;</div>
                <div id="ra1" class="block-trans arrowSmall">&searr;</div>
                <!--xor terms-->
                <div id="Lj" class="block">L<sub>j</sub></div>
                <div id="Rj" class="block">R<sub>j</sub></div>
                <div id="Sj" class="block">S<sub>j</sub></div>
                <div id="Fj" class="block">F<sub>k<sub>j</sub></sub>(S<sub>j</sub>)</div>
                <div id="kj">where k<sub>j</sub> = f<sub>k'</sub>(L<sub>j</sub>)</div>
                <!--xor operators-->
                <div id="xad" class="block-trans arrow">&#10549;</div>
                <div id="xor" class="block-trans">&nbsp&nbsp&nbsp⊕</div>
                <div id="xau" class="block-trans arrow" style="">&#10548;</div>
                <!--cipher text-->
                <div id="Cj" class="block" >C<sub>j</sub></div>
                <div id="ra2" class="block-trans arrow" >&rarr;</div>
                <!--PRNG related-->
                <div id="fn" class="block-trans">filename i</div>
                <div id="da2" class="block-trans arrow">&darr;</div>
                <div id="Gi" class="block-trans">PRNG<sub>i</sub></div>
                <div id="ra3" class="block-trans arrow" >&rarr;</div>
            </div>
        </div>

        <!-- 2nd row: received, Cj, Sj, img_search -->
        <div class="cell" id="receivedTerm">
            <h3>Bob (cloud server) </h3>
            This cell is used to show the received X and k, with hover -> highlight image_search effect.
        </div>
        <div class="cell textContainer" id="CjContainer">
            <p>cipher blocks(C<sub>j</sub>)</p>
            <textarea id="CjArea" disabled>display the cipher blocks for the chosen file</textarea>
        </div>
        <div class="cell textContainer" id="SjContainer">
            <p>computed S<sub>j</sub></p>
            <textarea id="SjArea" disabled>display the computed Sj: &#xa Sj = Cj[:64] ⊕ X[:64]</textarea>
            <button id="SjButton" type="button" disabled>compute</button>
        </div>
        <div class="cell" id="img_search">to put a simple image here, showing how Bob will deal with each block</div>
        <!-- 3rd row: computedFj, actualFj, isEqual, toReturn -->
        <div class="cell textContainer" id="computedFjContainer">
            <p>computed F<sub>j</sub></p>
            <textarea id="computedFjArea" disabled>display the computed Fj: &#xa Fj = F(k, Sj)</textarea>
            <button id="computedFjButton" type="button" disabled>compute</button>
        </div>
        <div class="cell textContainer" id="actualFjContainer">
            <p>actual F<sub>j</sub></p>
            <textarea id="actualFjArea" disabled>display the actual Fj: &#xa Fj = Cj[64:] ⊕ X[64] </textarea>
            <button id="actualFjButton" type="button" disabled>compute</button>
        </div>
        <div class="cell textContainer" id="isEqualContainer">
            <p>isEqual?</p>
            <textarea id="isEqualArea" disabled>is computed Fj equal to actual Fj for each block? </textarea>
            <button id="isEqualButton" type="button" disabled>compute</button>
        </div>
        <div class="cell textContainer" id="toReturnContainer">
            <p>toReturn?</p>
            <textarea id="toReturnArea" disabled>should I (Bob, the server) return the file to Alice?</textarea>
            <button id="toReturnButton" type="button" disabled>compute</button>
        </div>
        <!--footer row: next-->
        <button class="cell" id="next">Next -></button>

    </div>

</div>

<script>
    // $(document).ready(function() {
    //     for (let i = 0; i < 20; i++){
    //         $( "#gridContainer" ).append( `<div>${i}</div>` );
    //     }
    // })
</script>

</body>